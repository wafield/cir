{% load static %}
{% load compressed %}
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <title>Geodeliberator: Community Deliberation</title>
        <link href="https://cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min.css" rel="stylesheet" class="ui" />
        {% compressed_css 'postcir' %}
        <script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.1.20/require.min.js"></script>
        <script>
            require.config({
                baseUrl: "{% static 'js' %}",
                paths: {
                    'jquery': '//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min',
                    'semantic-ui': '//cdnjs.cloudflare.com/ajax/libs/semantic-ui/2.2.2/semantic.min',
                    'socket.io': '//130.203.136.141:443/socket.io/socket.io',
                	'tinymce': '//cdn.tinymce.com/4/tinymce.min',
				},
                shim: {
                    'semantic-ui': ['jquery'],
                },
                waitSeconds: 200,
            });
            require([
                'layout/header',
                'postcir/postcir-layout',
            ], function(Header) {
                Header.initHeader();
            });
        </script>
    </head>
    <body{% if forum_id %} forum-id="{{ forum_id }}"{% endif %}>
    	{% include 'header/forum_postcir_header.html' %}
        {% if load_error %}
        <div class="ui two column centered grid">
            <div class="column" style="top:50px">
                <div class="ui error message">
                    <div class="header">Forum does not exist; did you enter the correct address?</div>
                    <p>Click <a href="/">here</a> to return to homepage.</p>
                </div>
            </div>
        </div>
        {% else %}
        <div id="popup-notification" class="ui message hidden"></div>
        <div id="stmt">
            <h2>Citizen's statement on {{ forum_name }}</h2>
            <div class="ui styled accordion" style="width:auto">
                <div class="title">
                    <i class="dropdown icon"></i>
                    Click to show issue description.
                </div>
                <div class="content">
                    {{ stmt_preamble|safe }}
                </div>
            </div>
            {% for category in statement_categories %}
                <h3 class="stmt-category-title">{{ category.description }}</h3>
                <section class="stmt-category">
                    {% for group in category.groups %}
                    <p>{{ group.description|safe }}</p>
                    <ol class="ui list stmt-group">
                    {% for item in group.items %}
                        <li class="item stmt-item" data-id="{{ item.id }}" data-cite-name="{{ category.name }}-{{ item.id }}">{{ item.content_segmented|safe }}</li>
                    {% endfor %}
                    </ol>
                    {% endfor %}
                </section>
            {% endfor %}
            <div id="stmt-highlight-toolbar">
                <div class="ui blue segment labeled icon menu">
                    <a class="item stmt-cite-btn">
                        <i class="quote left icon"></i>Cite
                    </a>
                </div>
            </div>
        </div>
        <div id="opinion-board">
            <form class="ui form">
                <div class="ui info message">
                    (Optional) If you have formed an opinion after digesting the Citizens Statement, please cast your vote.
                </div>
                <div id="voter" class="grouped fields">
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" name="vote" data-vote="yes">
                            <label><b>Yes</b>: I think that the State College Borough should implement an annual
                                automatic inflation-based property tax increase.</label>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" name="vote" data-vote="no">
                            <label><b>No</b>: I think the proposal should <b>not</b> be implemented.</label>
                        </div>
                    </div>
                </div>
                <div id="voter-prompt" class="ui info top attached message">
                    If you have any question or comment and would like to discuss with your community, please post here.
                </div>
                <div class="field">
                    <textarea id="opinion-textarea"></textarea>
                </div>
                <div id="post-btn" class="ui submit primary fluid small button">Post</div>
            </form>
            <div id="posts-area" class="ui threaded comments"></div>
            <div id="activity-reply-form" class="ui form" style="display:none">
                <div class="field">
                    <label></label>
                    <textarea rows="2"></textarea>
                </div>
                <div id="reply-btn" class="ui submit primary small button">Reply</div>
            </div>
        </div>
    	{% include 'signin-signup.html' %}
        {% endif %}
    </body>
</html>

